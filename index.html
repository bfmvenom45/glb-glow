<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🎆 3D Model Viewer</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate icon" href="/favicon.ico">
  <link rel="stylesheet" href="/src/styles/main.css">
</head>
<body>
  <div id="app">
    <canvas id="canvas"></canvas>
    
    <!-- Model Selection -->
    <div class="model-selector">
  <h3>Model Selection</h3>
      
      <!-- File Upload Section -->
      <div class="file-upload-section">
        <input type="file" id="file-input" accept=".glb,.gltf" style="display: none;">
        <button id="upload-button" class="upload-btn">
          📁 Upload GLB/GLTF
        </button>
        <button id="export-button" class="export-btn" onclick="window.app?.exportModelWithEffects()">
          💾 Export with Effects
        </button>
        <div class="drag-hint">
          💡 Or drag & drop a file onto the scene
        </div>
        <div id="file-info" class="file-info hidden">
          <span id="file-name"></span>
          <button id="clear-file" class="clear-btn">❌</button>
        </div>
      </div>
      
      <div class="model-grid">
        <div class="model-card active" data-model="class-out_emision-inside 14.glb">
          <div class="model-preview">🌠</div>
          <span>Model (default)</span>
        </div>
        <div class="model-card" data-model="class-out_emision-in .glb">
          <div class="model-preview">🌠</div>
          <span>Model (old)</span>
        </div>
        <div class="model-card" data-model="016.glb">
          <div class="model-preview">🌠</div>
          <span>Model 016</span>
        </div>
        <!-- Removed models: 7,8,9,10,11,Bloodcell, Final Baked -->
        <div class="model-card" data-model="House15.glb">
          <div class="model-preview">🏠</div>
          <span>House 15</span>
        </div>
        <div class="model-card" data-model="House16.glb">
          <div class="model-preview">🏘️</div>
          <span>House 16</span>
        </div>
        <div class="model-card" data-model="assets/house-17.glb">
          <div class="model-preview">🏡</div>
          <span>House 17</span>
        </div>
      </div>
    </div>
    
    <!-- Controls Panel -->
    <div class="controls-panel">
      <h3>Bloom Controls</h3>
      
      <div class="control-section">
        <label>Bloom Mode</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="bloom-mode" value="simple" checked> 
            Simple
          </label>
          <label class="radio-label">
            <input type="radio" name="bloom-mode" value="selective"> 
            Selective
          </label>
        </div>
      </div>
      
      <div class="control-section">
        <label>Glow Mode</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="glow-mode" value="separate"> 
            Separate meshes
          </label>
          <label class="radio-label">
            <input type="radio" name="glow-mode" value="emissive" checked> 
            Emissive
          </label>
        </div>
      </div>
      
      <div class="control-section">
        <label>Strength: <span id="strength-value">0.01</span></label>
        <input type="range" id="strength" min="0" max="3" step="0.01" value="0.01">
      </div>
      
      <div class="control-section">
        <label>Threshold: <span id="threshold-value">0.1</span></label>
        <input type="range" id="threshold" min="0" max="1" step="0.01" value="0.1">
      </div>
      
      <div class="control-section">
        <label>Radius: <span id="radius-value">0.55</span></label>
        <input type="range" id="radius" min="0" max="1" step="0.01" value="0.55">
      </div>
      
      <div class="control-section">
        <label>Exposure: <span id="exposure-value">0.1</span></label>
        <input type="range" id="exposure" min="0.1" max="2" step="0.1" value="0.1">
      </div>
      
      <div class="control-section">
        <label>Glow Intensity: <span id="glow-intensity-value">2.9</span></label>
        <input type="range" id="glow-intensity" min="0" max="5" step="0.1" value="2.9">
      </div>
      
      <div class="control-section">
        <label>Glow Hue: <span id="glow-hue-value">0.06</span></label>
        <input type="range" id="glow-hue" min="0" max="1" step="0.01" value="0.06">
      </div>
      
      <!-- Pulsing controls removed -->
  <button id="pulse-button" class="pulse-btn">💫 Enable Pulse</button>
  <button id="scene-light-toggle" class="pulse-btn">🔆 Enable Light</button>
    <div class="settings-actions">
    <button id="info-button" class="secondary-btn">ℹ️ How it works</button>
    <button id="save-settings" class="secondary-btn">💾 Save Settings</button>
    <button id="reset-settings" class="secondary-btn">♻️ Reset Settings</button>
  </div>
  
  <!-- House17 controls (moved down, shown only for House 17 models) -->
    <div class="house17-panel">
      <!-- Make House17 toggle visually match the main pulse button -->
      <button id="house17-light-toggle" class="pulse-btn hidden" aria-hidden="true">💫 Enable House17 Pulse</button>
      <div class="house17-controls hidden" aria-hidden="true"></div>
    </div>
  <!-- Info modal -->
  <div id="info-modal" class="info-modal hidden" aria-hidden="true">
    <div class="info-modal__content">
      <button id="info-close" class="info-modal__close">✕</button>
      <h2>Quick start — How it works</h2>
      <ul>
        <li>Load a GLB/GLTF model (drag & drop or use model selector).</li>
        <li>Use Bloom / Glow settings to tune visual effects.</li>
        <li>Enable Pulsation for emissive animation; enable Scene Light to let emissive illuminate other parts.</li>
        <li>Save settings to keep them locally or Reset to defaults.</li>
        <li>Export with effects to get a GLB suitable for viewers (animations preserved when possible).</li>
        <li>Shortcut: <strong>Ctrl/Cmd + Shift + S</strong> — toggle settings panel.</li>
      </ul>
    </div>
  </div>
      
  <!-- Custom lighting - Hidden -->
  <!-- Glow settings - Hidden -->
      </div>
    </div>
    
    <!-- Loading Indicator -->
    <div id="loading-indicator" class="loading">
      <div class="spinner"></div>
  <p>Loading model...</p>
    </div>
  </div>
  
  <script type="module" src="/src/main.js"></script>
</body>
</html>

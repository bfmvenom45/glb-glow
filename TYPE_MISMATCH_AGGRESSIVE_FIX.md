# üîß –û–°–¢–ê–¢–û–ß–ù–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø TYPE_MISMATCH

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞:
–ü–æ–ø–µ—Ä–µ–¥–Ω—î –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è **–ù–ï —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ**, –±–æ:
- `‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ 0 –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–µ –∑–Ω–∞–π—à–ª–∞ –ø—Ä–æ–±–ª–µ–º—É
- –ê–ª–µ validator –≤—Å–µ –æ–¥–Ω–æ –ø–æ–∫–∞–∑—É—î: `TYPE_MISMATCH: attenuationDistance = null`

## üîç –ü—Ä–∏—á–∏–Ω–∞:
GLTFExporter –º–æ–∂–µ –µ–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ `null` –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–Ω—è.

## ‚úÖ –ù–æ–≤–µ —Ä—ñ—à–µ–Ω–Ω—è:

### –ê–≥—Ä–µ—Å–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥:
```javascript
// –ó–ê–í–ñ–î–ò –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ Infinity –¥–ª—è –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –∑ transmission > 0
if (material.transmission !== undefined && material.transmission > 0) {
  // –ù–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è
  material.attenuationDistance = Infinity;
  
  // –¢–∞–∫–æ–∂ –≤–∏–ø—Ä–∞–≤–ª—è—î–º–æ thickness —Ç–∞ attenuationColor
  if (material.thickness === null || material.thickness === undefined) {
    material.thickness = 0;
  }
  if (!material.attenuationColor) {
    material.attenuationColor = new THREE.Color(1, 1, 1);
  }
}
```

### –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
```javascript
// –¢–µ–ø–µ—Ä –ø–æ–∫–∞–∑—É—î –í–°–Ü –º–∞—Ç–µ—Ä—ñ–∞–ª–∏
console.log(`–ú–∞—Ç–µ—Ä—ñ–∞–ª 0: Material_0, transmission: 0.95, attenuationDistance: 0.5 ‚Üí Infinity`);
console.log(`–ú–∞—Ç–µ—Ä—ñ–∞–ª 20: Material_20, transmission: 1.0, attenuationDistance: null ‚Üí Infinity`);
// ...
console.log(`‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ 5 –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –∑ transmission`);
console.log(`‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ 5 –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤`);
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–í–ê–ñ–õ–ò–í–û):

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É
–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **F5** –∞–±–æ **Cmd+R**

### –ö—Ä–æ–∫ 2: –ï–∫—Å–ø–æ—Ä—Ç—É–π—Ç–µ –º–æ–¥–µ–ª—å
–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"üíæ –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑ –µ—Ñ–µ–∫—Ç–∞–º–∏"**

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å
–¢–µ–ø–µ—Ä –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
```
üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –ø–µ—Ä–µ–¥ –µ–∫—Å–ø–æ—Ä—Ç–æ–º...
  –ú–∞—Ç–µ—Ä—ñ–∞–ª 0: Mesh242_0, transmission: 0, attenuationDistance: undefined, thickness: undefined
  –ú–∞—Ç–µ—Ä—ñ–∞–ª 1: Mesh242_1, transmission: 0, attenuationDistance: undefined, thickness: undefined
  ...
  –ú–∞—Ç–µ—Ä—ñ–∞–ª 20: Mesh242_20, transmission: 0.95, attenuationDistance: 0.5, thickness: 0
  ‚ö†Ô∏è –ú–∞—Ç–µ—Ä—ñ–∞–ª "Mesh242_20": transmission=0.95, attenuationDistance: 0.5 ‚Üí Infinity
  –ú–∞—Ç–µ—Ä—ñ–∞–ª 21: Mesh242_21, transmission: 0, attenuationDistance: undefined, thickness: undefined
  ...
‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ X –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤ –∑ transmission
‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ X –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤
```

**–í–∞–∂–ª–∏–≤–æ:** –¢–µ–ø–µ—Ä –º–∞—î –±—É—Ç–∏ **–ù–ï 0**, –∞ —Ä–µ–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤!

### –ö—Ä–æ–∫ 4: –í–∞–ª—ñ–¥–∞—Ü—ñ—è
1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏–π `House15_with_effects.glb`
2. –ù–∞ https://github.khronos.org/glTF-Validator/
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Error: 0 (–±—É–ª–æ 1)
‚ÑπÔ∏è Info: 13 UNUSED_OBJECT (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
```

---

## üìä –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—å:

### –î–æ (–Ω–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ):
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä—è–ª–∏ —á–∏ attenuationDistance === null
if (material.attenuationDistance === null) {
  material.attenuationDistance = Infinity;
}
// –ü—Ä–æ–±–ª–µ–º–∞: GLTFExporter –≤—Å–µ –æ–¥–Ω–æ –µ–∫—Å–ø–æ—Ä—Ç—É–≤–∞–≤ null
```

### –ü—ñ—Å–ª—è (–ø—Ä–∞—Ü—é—î):
```javascript
// –ó–ê–í–ñ–î–ò –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ Infinity —è–∫—â–æ —î transmission > 0
if (material.transmission > 0) {
  material.attenuationDistance = Infinity; // FORCE SET
}
// –¢–µ–ø–µ—Ä GLTFExporter –µ–∫—Å–ø–æ—Ä—Ç—É—î Infinity
```

---

## ‚ùì –ß–æ–º—É —Ü–µ –ø—Ä–∞—Ü—é—î?

### –ü—Ä–æ–±–ª–µ–º–∞ –≤ GLTFExporter:
1. Three.js –º–∞—Ç–µ—Ä—ñ–∞–ª –º–∞—î `attenuationDistance = 0.5`
2. GLTFExporter –æ–±—Ä–æ–±–ª—è—î –º–∞—Ç–µ—Ä—ñ–∞–ª
3. –Ø–∫—â–æ –∑–Ω–∞—á–µ–Ω–Ω—è "–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ", –µ–∫—Å–ø–æ—Ä—Ç—É—î —è–∫ `null`
4. Validator –±–∞—á–∏—Ç—å `null` ‚Üí –ø–æ–º–∏–ª–∫–∞!

### –ù–∞—à–µ —Ä—ñ—à–µ–Ω–Ω—è:
1. –ü–µ—Ä–µ–¥ –µ–∫—Å–ø–æ—Ä—Ç–æ–º **—Ñ–æ—Ä—Å—É—î–º–æ** `Infinity` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è GLTF)
2. GLTFExporter –±–∞—á–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è
3. –ï–∫—Å–ø–æ—Ä—Ç—É—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
4. Validator —â–∞—Å–ª–∏–≤–∏–π! ‚úÖ

---

## üéØ –ü–µ—Ä–µ–≤—ñ—Ä–æ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫:

- [ ] –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É (F5)
- [ ] –ù–∞—Ç–∏—Å–Ω—É–ª–∏ "üíæ –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏"
- [ ] –í –∫–æ–Ω—Å–æ–ª—ñ –±–∞—á–∏–º–æ: `‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ X –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤` (–ù–ï 0!)
- [ ] –ë–∞—á–∏–º–æ –¥–µ—Ç–∞–ª—å–Ω–∏–π –ª–æ–≥ –∫–æ–∂–Ω–æ–≥–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—É
- [ ] –ó–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∏ GLB –Ω–∞ validator
- [ ] Validator –ø–æ–∫–∞–∑—É—î: **0 Errors** ‚úÖ

---

## üö® –Ø–∫—â–æ –≤—Å–µ —â–µ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫—É:

### –í–∞—Ä—ñ–∞–Ω—Ç 1: Hard refresh
```
Ctrl + Shift + R (Windows)
Cmd + Shift + R (Mac)
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à
```
1. F12 ‚Üí Network
2. –ü–ö–ú ‚Üí "Clear browser cache"
3. F5
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ñ–∞–π–ª –æ–Ω–æ–≤–∏–≤—Å—è
```javascript
// –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —ñ –≤–≤–µ–¥—ñ—Ç—å:
console.log(window.app.exportModelWithEffects.toString());
// –ú–∞—î –ø–æ–∫–∞–∑–∞—Ç–∏ –Ω–æ–≤–∏–π –∫–æ–¥ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
```

---

## üí° –î–æ–¥–∞—Ç–∫–æ–≤–æ:

### –Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
–ó–∞–∫–æ–º–µ–Ω—Ç—É–π—Ç–µ —Ä—è–¥–æ–∫:
```javascript
// console.log(`  –ú–∞—Ç–µ—Ä—ñ–∞–ª ${idx}: ${material.name || 'unnamed'}...`);
```

### –Ø–∫—â–æ –º–æ–¥–µ–ª—å –º–∞—î –±–∞–≥–∞—Ç–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ–≤:
–õ–æ–≥—É–≤–∞–Ω–Ω—è –º–æ–∂–µ –±—É—Ç–∏ –¥–æ–≤–≥–∏–º. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –≤–æ–Ω–æ –¥–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è.

---

–°—Ç–≤–æ—Ä–µ–Ω–æ 06.10.2025 üîß
**–ê–≥—Ä–µ—Å–∏–≤–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è TYPE_MISMATCH Error**

–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É —Ç–∞ —Å–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑! üöÄ
